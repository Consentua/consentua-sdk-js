<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-toggle-button/paper-toggle-button.html">

<dom-module id="consentua-binary-selector">
  <template>
    <style>
      .pg{
        box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.35);
        height: 670px;
        padding: 1em;
        margin: 0em 1em;
        background: #fff;
        border-radius: 5px;
      }
      .all-toggle-container{
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .all-toggle-container paper-toggle-button{
        align-self: flex-end;
        margin: 1em;
      }
      .pg .purp-container{
        height: 500px;
        overflow-y: auto;
        border-top: 2px solid #eee;
      }
      .pg .purp{
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid #eee;
      }
      .pg .purp article{
        /* padding: 1em 0em; */
      }
      .pg .purp paper-toggle-button{
        margin: 1em;
      }
    </style>
    <section>
        <div class="pg">
          <h2>[[purposeGroup.Description]]</h2>
          <p>[[purposeGroup.Explanation]]</p>
          <span class="all-toggle-container">
            <p>Allow all purposes</p>
            <paper-toggle-button class="tgl-binary-all"></paper-toggle-button>
          </span>
          <div class="purp-container">
            <dom-repeat items="{{purposeGroup.Purposes}}">
              <template>
                <div class="purp">
                  <article>
                    <h3>We will use</h3>
                    <p>[[item.DataUse]]</p>
                    <h3>For the purposes of</h3>
                    <p>[[item.DataPurpose]]</p>
                  </article>
                  <paper-toggle-button class="tgl-binary" on-change="_setConsent" data-id$="{{item.Id}}"></paper-toggle-button>
                </div>
              </template>
            </dom-repeat>
          </div>
        </div>
      
    </section>
  </template>
  <script>
    class ConsentuaBinarySelector extends Polymer.Element {
      static get is() { return 'consentua-binary-selector'; }
      static get properties() {
        return {
          purposeGroup: {
            type: Object,
            notify: true,
            reflectToAttribute: true,
            value: {}
          }
        };
      }
      ready() {
        super.ready();
      }
      _setConsent(e) {
        window.consentua.setConsent([e.target.dataset.id], e.target.checked)
      }
    }

    // Associate the new class with an element name
    customElements.define(ConsentuaBinarySelector.is, ConsentuaBinarySelector);
  </script>
</dom-module>