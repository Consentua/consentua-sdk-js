<!-- main.html is the page that's loaded in the iframe/webview -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple Consent</title>

    <style type="text/css">
    html, body {
        margin: 0;
        padding: 0;
        font-family: Helvetica, sans-serif;
    }

    #loading{

    }

    #main{
      display: none;
    }

    ol {
        list-style-type: none;
    }
    </style>

    <script
			  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
			  integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
			  crossorigin="anonymous"></script>

    <!-- This is the main library; all consentua interactions need it
         ./websdk/ is made available automatically
    -->
    <script src="../websdk/consentua-interaction.js"></script>
    <script src="../websdk/comms.js"></script>

</head>
<body>

    <script>
    $(document).on('consentua-ready', function(){

      console.log("Consentua is ready; setting up the simple interaction", window.consentua.template);

      // Bind the simple UI to the template that we've been told to use
      var pgs = window.consentua.template.PurposeGroups;
      console.log("Purpose groups", pgs);
      for(var i in pgs)
      {
          var pg = pgs[i];
          var purposes = "";
          console.log("PG " + i, pg.Purposes);

          for(var j in pg.Purposes) {
              purposes += pg.Purposes[j].DataPurpose + "<br />";
          }
          $('#purposes').append("<li>" + purposes + "<br /></li>");
      }


      // Hide the loading message and show the interaction
      $('#loading').hide();
      $('#main').show();

    });
    </script>

    <div id="loading">
        Please wait...
    </div>

    <div id="main">
        <ol id="purposes"></ol>

        <div id="assent">
            <input type="checkbox" name="toggle-assent" value="1" /> <span>I agree that my personal data may be used for the purposes stated above.</span>
        </div>
    </div>

</body>
</html>
